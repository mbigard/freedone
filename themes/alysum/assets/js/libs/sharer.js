// sharer.js
!function(o,r){"use strict";function s(t){this.elem=t}s.init=function(){var t,e=r.querySelectorAll("[data-sharer]"),a=e.length;for(t=0;t<a;t++)e[t].addEventListener("click",s.add)},s.add=function(t){var e=t.currentTarget||t.srcElement;new s(e).share()},s.prototype={constructor:s,getValue:function(t){var e=this.elem.getAttribute("data-"+t);return e&&"hashtag"===t&&(e.startsWith("#")||(e="#"+e)),e},share:function(){var t=this.getValue("sharer").toLowerCase(),e={facebook:{shareUrl:"https://www.facebook.com/sharer/sharer.php",params:{u:this.getValue("url"),hashtag:this.getValue("hashtag")}},linkedin:{shareUrl:"https://www.linkedin.com/shareArticle",params:{url:this.getValue("url"),mini:!0}},twitter:{shareUrl:"https://twitter.com/intent/tweet/",params:{text:this.getValue("title"),url:this.getValue("url"),hashtags:this.getValue("hashtags"),via:this.getValue("via")}},email:{shareUrl:"mailto:"+this.getValue("to")||"",params:{subject:this.getValue("subject"),body:this.getValue("title")+"\n"+this.getValue("url")},isLink:!0},whatsapp:{shareUrl:null!==this.getValue("web")?"https://api.whatsapp.com/send":"whatsapp://send",params:{text:this.getValue("title")+" "+this.getValue("url")},isLink:!0},telegram:{shareUrl:null!==this.getValue("web")?"https://telegram.me/share":"tg://msg_url",params:{text:this.getValue("title"),url:this.getValue("url"),to:this.getValue("to")},isLink:!0},viber:{shareUrl:"viber://forward",params:{text:this.getValue("title")+" "+this.getValue("url")},isLink:!0},line:{shareUrl:"http://line.me/R/msg/text/?"+encodeURIComponent(this.getValue("title")+" "+this.getValue("url")),isLink:!0},pinterest:{shareUrl:"https://www.pinterest.com/pin/create/button/",params:{url:this.getValue("url"),media:this.getValue("image"),description:this.getValue("description")}},tumblr:{shareUrl:"http://tumblr.com/widgets/share/tool",params:{canonicalUrl:this.getValue("url"),content:this.getValue("url"),posttype:"link",title:this.getValue("title"),caption:this.getValue("caption"),tags:this.getValue("tags")}},hackernews:{shareUrl:"https://news.ycombinator.com/submitlink",params:{u:this.getValue("url"),t:this.getValue("title")}},reddit:{shareUrl:"https://www.reddit.com/submit",params:{url:this.getValue("url")}},pocket:{shareUrl:"https://getpocket.com/save",params:{url:this.getValue("url")}},evernote:{shareUrl:"http://www.evernote.com/clip.action",params:{url:this.getValue("url"),title:this.getValue("title")}},skype:{shareUrl:"https://web.skype.com/share",params:{url:this.getValue("url"),title:this.getValue("title")}},messenger:{shareUrl:"http://www.facebook.com/dialog/send",params:{link:this.getValue("url")}},googlebookmarks:{shareUrl:"https://www.google.com/bookmarks/mark",params:{op:"edit",bkmk:this.getValue("url"),title:this.getValue("title")}}}[t];return e&&(e.width=this.getValue("width"),e.height=this.getValue("height")),void 0!==e&&this.urlSharer(e)},urlSharer:function(t){var e,a=t.params||{},r=Object.keys(a),s=0<r.length?"?":"";for(e=0;e<r.length;e++)"?"!==s&&(s+="&"),a[r[e]]&&(s+=r[e]+"="+encodeURIComponent(a[r[e]]));if(t.shareUrl+=s,t.isLink)o.location.href=t.shareUrl;else{var i=t.width||600,l=t.height||480,h=o.innerWidth/2-i/2+o.screenX,u="scrollbars=no, width="+i+", height="+l+", top="+(o.innerHeight/2-l/2+o.screenY)+", left="+h,n=o.open(t.shareUrl,"",u);o.focus&&n.focus()}}},"complete"===r.readyState||"loading"!==r.readyState?s.init():r.addEventListener("DOMContentLoaded",s.init),o.addEventListener("page:load",s.init),o.addEventListener("turbolinks:load",s.init),o.Sharer=s}(window,document);